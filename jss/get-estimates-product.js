(function(){"use strict";var debug=!1,cartCookie,shippingCalcExist=document.querySelector(".shipping-calc-wrapper");if(shippingCalcExist)return;var productSection=document.querySelector(".shopping-calculator");if(!productSection){log("Could not find the element");return}var productSelect=document.querySelector('.product-form form input[name="id"]'),productPrice=document.querySelector("product-data .c-product__details .c-product__prices .c-product__price")?.textContent.replace("R$","").replace(",",".").trim(),iconButton='<svg class="icon icon-arrow" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M15 8.25H5.8725L10.065 4.0575L9 3L3 9L9 15L10.0575 13.9425L5.8725 9.75H15V8.25Z" fill="#101010" stroke="#101010"/></svg>';if(!productSelect){log("Could not find the main select element");return}var shippingCountry=document.createElement("select"),shippingProvince=document.createElement("select"),iconButton='<svg aria-hidden="true" focusable="false" class="icon icon-caret" viewBox="0 0 10 6"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.354.646a.5.5 0 00-.708 0L5 4.293 1.354.646a.5.5 0 00-.708.708l4 4a.5.5 0 00.708 0l4-4a.5.5 0 000-.708z" fill="currentColor"></svg>',shippingFormStructure=`
		<div class="shipping-calc-wrapper">
			<div class="shipping__title-and-link">
				<label for="shipping-calculator-input" class="title-calc">${window.shippingCalculator.shippingEstimatorTitle}</label>
				<a target="_blank" class="link-code" href="https://buscacepinter.correios.com.br/app/endereco/index.php">N\xE3o sei meu CEP</a>
			</div>
			<form class="shipping__input-and-button">
				<input value='' id="shipping-calculator-input" type="text" name="shipping_address[zip]" placeholder="Insira seu CEP" />
				<button class="button shippingCalcButton button--primary">${iconButton}</button>
			</form>
			<p class="message"></p>
		</div>
	`;productSection.innerHTML=shippingFormStructure;var shippingZip=document.querySelector("#shipping-calculator-input"),shippingCalcButton=document.querySelector(".shippingCalcButton"),shippingMessage=document.querySelector(".shipping-calc-wrapper .message"),initFields=function(){for(var countries=["Brazil"],i=0;i<countries.length;i++)shippingCountry.add(new Option(countries[i],countries[i],i===0));shippingCountry.name="shipping_address[country]";for(var provinces=["Acre"],i=0;i<provinces.length;i++)shippingProvince.add(new Option(provinces[i],provinces[i],i===0));shippingProvince.name="shipping_address[province]",shippingCalcButton.onclick=function(event){if(event.preventDefault(),shippingMessage.innerHTML="",!productSelect.value.length)return!1;shippingZip.value!=""&&(shippingCalcButton.innerHTML='<svg aria-hidden="true" focusable="false" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle></svg>',shippingCalcButton.setAttribute("disabled",!0)),cartCookie=getCookie("cart");var tempCookieValue=tempCookieValue||"temp-cart-cookie___"+Date.now(),fakeCookieValue=fakeCookieValue||"fake-cart-cookie___"+Date.now();if(cartCookie?log("cookie found"):(log("no cookie found"),updateCartCookie(tempCookieValue),cartCookie=getCookie("cart")),cartCookie.length<32){log("cart ID not valid");return}return updateCartCookie(fakeCookieValue),log(getCookie("cart")),getRates(parseInt(productSelect.value)),!1}};function log(a){debug&&console.log(a)}var getCookie=function(name){var value="; "+document.cookie,parts=value.split("; "+name+"=");if(parts.length==2)return parts.pop().split(";").shift()},updateCartCookie=function(a){log("changing cart cookie value to: "+a);var date=new Date;date.setTime(date.getTime()+14*864e5);var expires="; expires="+date.toGMTString();document.cookie="cart="+a+expires+"; path=/"},resetCartCookie=function(){updateCartCookie(cartCookie),log(getCookie("cart"))},getRates=function(variantId){if(typeof variantId>"u")return;var productQuantity=document.querySelector(".quantity__input"),quantity=productQuantity?parseInt(productQuantity.value):1,addData={id:variantId,quantity},totalValue=quantity*Number(productPrice);const getShipingButton=document.querySelector(".shippingCalcButton");fetch("/cart/add.js",{body:JSON.stringify(addData),credentials:"same-origin",headers:{"Content-Type":"application/json","X-Requested-With":"xmlhttprequest"},method:"POST"}).then(function(response){return response.json()}).then(function(json){fetch("/cart/shipping_rates.json?"+new URLSearchParams({"shipping_address[country]":shippingCountry.value,"shipping_address[province]":shippingProvince.value,"shipping_address[zip]":shippingZip.value})).then(function(response){return response.json()}).then(function(result){const shippingValuesArray=result?.shipping_rates?.map(item=>+item.price),indexMinValue=shippingValuesArray?.indexOf(Math.min(...shippingValuesArray));if(result.shipping_rates&&result.shipping_rates.length){let messageHtml="<ul>";result.shipping_rates?.filter(e=>!e.name?.includes("Stanley")).map((element,index)=>{if(element.delivery_days.length>0)if(element.delivery_days[0]==1)var deliveryDays="<span>1 dia \xFAtil</span>";else var deliveryDays=`<span>${element.delivery_days[0]} dias \xFAteis</span>`;const finalMessage=element.price==="0.00"||totalValue>350&&index===indexMinValue?`<span>${element.name} com </span><span style="color: #A30817; font-weight: 600;">${theme.strings.shippingCalculator.freeShipping}</span>`:`${element.name} por R$ ${element.price.replace(".",",")}`;messageHtml+=`
						<li>
							${finalMessage}
							<br>
							${deliveryDays||""}
						</li>
						`,index===result.shipping_rates.length&&(messageHtml+="</ul>")}),shippingMessage.innerHTML=messageHtml,getShipingButton.innerHTML=iconButton,getShipingButton.removeAttribute("disabled")}else shippingMessage.className="message error",shippingMessage.innerHTML=window.shippingCalculator.shippingEstimatorMessageError,getShipingButton.innerHTML=iconButton,getShipingButton.removeAttribute("disabled");resetCartCookie()}).catch(function(error){resetCartCookie(),shippingMessage.innerHTML="",getShipingButton.innerHTML=iconButton,getShipingButton.removeAttribute("disabled"),console.error("Unable to calculate shipping: ",error)})}).catch(function(err){console.error(err),resetCartCookie()})};initFields()})();
//# sourceMappingURL=/cdn/shop/t/13/assets/get-estimates-product.js.map?v=159216012267670942101724436697
